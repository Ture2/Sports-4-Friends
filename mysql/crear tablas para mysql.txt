DROP TABLE JUGADORES;
DROP TABLE EQUIPOS;
DROP TABLE DEPORTES;
DROP TABLE USUARIOS;


CREATE TABLE DEPORTES
(
    ID_DEPORTE INT(10) PRIMARY KEY AUTO_INCREMENT,
    NOMBRE_DEPORTE VARCHAR(30) NOT NULL UNIQUE, 
    NUMERO_MAXIMO_JUGADORES INT(3),
    DURACION_MIN INT(5) 
)

CREATE TABLE USUARIOS
(
    ID_USUARIO INT(10) PRIMARY KEY AUTO_INCREMENT,
    NICKNAME VARCHAR(15) NOT NULL UNIQUE,
    NOMBRE VARCHAR(30) NOT NULL,
    APELLIDOS VARCHAR(30) NOT NULL,
    TELEFONO INT(9) NULL,
    CORREO VARCHAR(50) NOT NULL UNIQUE,
    PASSWORD VARCHAR(15) NOT NULL  
)

CREATE TABLE EQUIPOS
(
    ID_EQUIPO INT(10) PRIMARY KEY AUTO_INCREMENT,
    DEPORTE INT(10),
    NOMBRE_EQUIPO VARCHAR(30) NOT NULL UNIQUE,
    FOREIGN KEY (DEPORTE) REFERENCES DEPORTES(ID_DEPORTE)ON DELETE CASCADE
)

CREATE TABLE JUGADORES 
(
    ID_JUGADOR INT(10) PRIMARY KEY AUTO_INCREMENT,
    EQUIPO INT(10) NULL,
    USUARIO INT(10) NULL,
    FOREIGN KEY (USUARIO) REFERENCES USUARIOS(ID_USUARIO)ON DELETE CASCADE,
    FOREIGN KEY (EQUIPO) REFERENCES EQUIPOS(ID_EQUIPO)ON DELETE CASCADE
 )

 --INICIAR LOS AUTO_INCREMENT,

 ALTER TABLE DEPORTES AUTO_INCREMENT=880001;
 ALTER TABLE USUARIOS AUTO_INCREMENT=1;
 ALTER TABLE EQUIPOS AUTO_INCREMENT=550001;
 ALTER TABLE JUGADORES AUTO_INCREMENT=330001;


 --INSERTAR DATOS EN LAS TABLAS 

INSERT INTO USUARIOS (NICKNAME, NOMBRE,  APELLIDOS, TELEFONO, CORREO, PASSWORD) VALUES(1, 'alv1', 'Alvaro', 'Carpizo Garcia', 611111111, 'alvcarpi@ucm', '1111');
INSERT INTO USUARIOS (NICKNAME, NOMBRE,  APELLIDOS, TELEFONO, CORREO, PASSWORD) VALUES(2, 'jhce2', 'Jhimmy Ender', 'Candela Espinosa', 622222222, 'jcandela@ucm.es', '2222');
INSERT INTO USUARIOS (NICKNAME, NOMBRE,  APELLIDOS, TELEFONO, CORREO, PASSWORD) VALUES(3, 'jvp3', 'Jorge', 'Valsameda Plasencia', 633333333, 'jvalma01@ucm.es', '3333');
INSERT INTO USUARIOS (NICKNAME, NOMBRE,  APELLIDOS, TELEFONO, CORREO, PASSWORD) VALUES(4, 'iif4', 'Iker', 'Ibañez FLores', 644444444, 'ikeriban@ucm.es', '4444');
INSERT INTO USUARIOS (NICKNAME, NOMBRE,  APELLIDOS, TELEFONO, CORREO, PASSWORD) VALUES(5, 'atc5', 'Alberto', 'Turegano Castedo', 655555555, 'alberture@ucm.es', '5555');
INSERT INTO USUARIOS (NICKNAME, NOMBRE,  APELLIDOS, TELEFONO, CORREO, PASSWORD) VALUES(6, 'jjjj6', 'Jonathan Jose', 'Jimenez Jimenez', 666666666, 'jonathanj@ucm.es', '6666');
 

INSERT INTO DEPORTES (NOMBRE_DEPORTE,  NUMERO_MAXIMO_JUGADORES, DURACION_MIN) VALUES('BALONCESTO', 10, 40);
INSERT INTO DEPORTES (NOMBRE_DEPORTE,  NUMERO_MAXIMO_JUGADORES, DURACION_MIN) VALUES('FUTBOL', 20, 90);
INSERT INTO DEPORTES (NOMBRE_DEPORTE,  NUMERO_MAXIMO_JUGADORES, DURACION_MIN) VALUES('BEISBOL', 10, 60);
INSERT INTO DEPORTES (NOMBRE_DEPORTE,  NUMERO_MAXIMO_JUGADORES, DURACION_MIN) VALUES('BALONMANO', 15, 40);

 
INSERT INTO EQUIPOS (DEPORTE, NOMBRE_EQUIPO) VALUES (880001, 'BULL');
INSERT INTO EQUIPOS (DEPORTE, NOMBRE_EQUIPO) VALUES(880002, 'REAL MADRID');
INSERT INTO EQUIPOS (DEPORTE, NOMBRE_EQUIPO) VALUES(880003, 'SALOU');

INSERT INTO JUGADORES (EQUIPO,  USUARIO) VALUES(550001, 1);
INSERT INTO JUGADORES (EQUIPO,  USUARIO) VALUES(550001, 2);
INSERT INTO JUGADORES (EQUIPO,  USUARIO) VALUES(550002, 3);
INSERT INTO JUGADORES (EQUIPO,  USUARIO) VALUES(550002, 4);
INSERT INTO JUGADORES (EQUIPO,  USUARIO) VALUES(550003, 5);
INSERT INTO JUGADORES (EQUIPO,  USUARIO) VALUES(550003, 6);

COMMIT;

DELETE FROM USUARIOS;
DELETE FROM EQUIPOS;
DELETE FROM DEPORTES;
DELETE FROM JUGADORES;


SELECT * FROM USUARIOS;
SELECT * FROM EQUIPOS;
SELECT * FROM DEPORTES;
SELECT * FROM JUGADORES;

-- SI BORRAMOS UN USUARIO DE LA TABLA USUARIOS, SE DEBE DE BORRAR TODOS LOS EQUIPOS QUE PERTENECE EN LA TABLA JUGADORES.
DELETE FROM usuarios WHERE nombre = 'Alvaro';

-- SI BORRAMOS SOLO DE UN EQUIPO UN USUARIO REGISTRADO.
DELETE FROM jugadores WHERE id_jugador = 9002;

--  SI ELIMINAMOS UN EQUIPO DE LA TABLA EQUIPOS, SE DEBE BORRAR LOS JUGADORES QUE PERTENECIAN A ESE EQUIPO DE LA TABLA JUGADORES.
DELETE FROM equipos WHERE nombre_equipo = 'REAL MADRID';

-- SI BORRAMOS UN DEPORTE DE LA TABLA DEPORTES, SE DEBE BORRAR TODOS LOS EQUIPOS CORRESPONDIENTES DE ESE DEPORTE EN LA TABLA EQUIPOS 
--Y POR CONSIGUENTE SE BORRA TODOS LOS JUGADORES QUE JUGAN EN ALGUN EQUIPO DE ESE DEPORTE DE LA TABLA JUGADORES
DELETE FROM deportes WHERE nombre_deporte = 'BEISBOL';

/*
-- OJO!! PARA AÑADIR LA COLUMNA PASSWORD A LA TABLA USUARIOS
ALTER TABLE usuarios ADD COLUMN PASSWORD VARCHAR(15) NOT NULL;

--PARA ACTUALIZAR LAS TABLAS CON LAS PASSWORD DE CADA USUARIO
UPDATE usuarios SET `PASSWORD` = '1111' WHERE `NOMBRE` = 'Alvaro';
UPDATE usuarios SET `PASSWORD` = '2222' WHERE `NOMBRE` = 'Jhimmy Ender';
UPDATE usuarios SET `PASSWORD` = '3333' WHERE `NOMBRE` = 'Jorge';
UPDATE usuarios SET `PASSWORD` = '4444' WHERE `NOMBRE` = 'Iker';
UPDATE usuarios SET `PASSWORD` = '5555' WHERE `NOMBRE` = 'Alberto';
UPDATE usuarios SET `PASSWORD` = '6666' WHERE `NOMBRE` = 'Jonathan Jose';
*/